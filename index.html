<!DOCTYPE html>
<html lang="sl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ŽareX - Lasersko Čiščenje</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,sans-serif;line-height:1.6;color:#222;overflow-x:hidden;}
header{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background:#193a65;box-shadow:0 2px 6px rgba(0,0,0,0.1);position:sticky;top:0;z-index:1000;}
.header-title{color:white;font-size:1.2em;font-weight:bold;text-align:center;flex:1;text-transform:uppercase;}
.logo{height:80px;}
.menu-toggle{position:relative;width:36px;height:26px;border:none;background:none;cursor:pointer;display:flex;flex-direction:column;justify-content:space-between;z-index:2500;}
.menu-toggle span{display:block;height:4px;background-color:white;border-radius:2px;transition:all 0.3s ease;}
.menu-toggle.active span:nth-child(1){transform:rotate(45deg) translateY(10px);}
.menu-toggle.active span:nth-child(2){opacity:0;}
.menu-toggle.active span:nth-child(3){transform:rotate(-45deg) translateY(-10px);}
.sidebar{position:fixed;left:-320px;top:0;width:300px;height:100%;background:#193a65;color:white;display:flex;flex-direction:column;align-items:center;padding-top:40px;transition:all 0.4s ease;opacity:0;box-shadow:4px 0 10px rgba(0,0,0,0.3);z-index:2000;}
.sidebar.active{left:0;opacity:1;}
.sidebar img{width:120px;margin-bottom:20px;}
.sidebar a{width:100%;padding:18px 25px;color:white;text-decoration:none;font-weight:bold;font-size:1.2em;border-bottom:1px solid rgba(255,255,255,0.1);text-align:center;transition:background 0.3s;}
.sidebar a:hover{background:rgba(255,255,255,0.1);}
.hero{position:relative;height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;color:white;overflow:hidden;}
.hero-video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:0;}
.hero-content{position:relative;z-index:1;max-width:900px;padding:30px;background:rgba(0,0,0,0.5);border-radius:15px;}
.hero h1{font-size:2.8em;margin-bottom:20px;}
.hero h3{margin-bottom:20px;font-weight:normal;font-size:1.5em;}
.services{background:#193a65;color:white;padding:100px 30px;text-align:center;}
.services h2{margin-bottom:50px;font-size:2.5em;}
.service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;max-width:1200px;margin:0 auto;}
.service-item img{width:100%;max-width:400px;border-radius:15px;box-shadow:0 6px 12px rgba(0,0,0,0.4);transition:transform 0.3s ease;}
.service-item:hover img{transform:scale(1.08);}
.service-item p{margin-top:15px;font-size:1.2em;color:white;font-weight:bold;}
.reviews{background:white;color:black;padding:80px 20px;text-align:center;}
#review-list{max-width:700px;margin:0 auto;min-height:160px;}
.review-card{display:none;opacity:0;transition:opacity 0.8s ease-in-out;padding:20px;background:white;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.review-card.active{display:block;opacity:1;}
.slider-buttons{margin-top:20px;display:flex;justify-content:center;gap:20px;}
.slider-buttons button{background:black;color:white;border:none;padding:10px 18px;border-radius:50%;font-size:1.3em;cursor:pointer;transition:background 0.3s;}
.slider-buttons button:hover{background:#333;}
.rating{color:#facc15;margin-left:5px;}
.contact{position:relative;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:white;overflow:hidden;gap:20px;padding:40px 0;}
.contact-video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:0;}
.contact-container{position:relative;z-index:1;display:flex;flex-direction:row;justify-content:center;align-items:stretch;gap:40px;max-width:1200px;width:100%;padding:30px;}
.contact-content,.company-info{flex:1;background:rgba(0,0,0,0.6);padding:30px;border-radius:15px;text-align:center;min-height:400px;}
.contact-content a{display:block;margin:8px 0;color:white;text-decoration:none;font-weight:bold;}
.contact-content a:hover{text-decoration:underline;}
.social-icons{margin-top:15px;display:flex;justify-content:center;gap:20px;}
.social-icons a{font-size:1.8em;color:white;transition:transform 0.3s ease,color 0.3s ease;}
.social-icons a:hover{color:#ccc;transform:scale(1.2);}
.coverage{position:relative;z-index:1;width:100%;display:flex;justify-content:center;align-items:center;margin-top:-20px;opacity:0;transform:translateY(30px);transition:all 0.8s ease;}
.coverage.visible{opacity:1;transform:translateY(0);}
.coverage-inner{background:rgba(0,0,0,0.6);border-radius:15px;max-width:1200px;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;color:white;text-align:center;padding:40px;min-height:400px;}
.coverage-inner img{width:100%;max-width:450px;height:auto;border-radius:10px;box-shadow:0 6px 12px rgba(0,0,0,0.4);margin-bottom:20px;}
.coverage-text h3{margin-bottom:10px;font-size:1.8em;}
.coverage-text p{font-size:1.1em;max-width:700px;margin:0 auto;}
footer{text-align:center;padding:15px;background:#193a65;color:white;}
@media (max-width:1000px){.contact-container{flex-direction:column;}.coverage-inner{padding:20px;min-height:350px;}}
</style>
</head>
<body>
<header>
<button class="menu-toggle" id="menu-btn"><span></span><span></span><span></span></button>
<div class="header-title">LASERSKO ČIŠČENJE ŽAREX, ŽARKO VUKOTIĆ S.P.</div>
<img src="logo.png" alt="ŽareX logo" class="logo">
</header>

<!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <img src="logo.png" alt="ŽareX logo">
    <a href="index.html">Začetna</a>
    <a href="#storitev">Storitve</a>
    <a href="#reviews">Recenzije</a>
    <a href="galerija.html">Galerija</a>
    <a href="cenik.html">Cenik</a>
    <a href="onama.html">O nas</a>
    <a href="#kontakt">Kontakt</a>
  </div>

<section class="hero" id="hero">
<video autoplay loop muted playsinline class="hero-video"><source src="video.mp4" type="video/mp4"></video>
<div class="hero-content">
<h1>Čistota prihodnosti z ŽAREX</h1>
<h3>Strokovnost, izkušnje in odgovornost pri vsakem projektu</h3>
<p>S sodobnimi tehnologijami poskrbimo za varno in učinkovito odstranjevanje rje, nečistoč in prevlek brez kemikalij ter brez poškodb površin.</p>
</div>
</section>

<section class="services" id="storitev">
<h2>STORITVE</h2>
<div class="service-grid">
<a class="service-item" href="kovine.html"><img src="storitev1.jpg" alt="Čiščenje kovin"><p>Čiščenje kovin</p></a>
<a class="service-item" href="podvozja.html"><img src="storitev2.jpg" alt="Čiščenje podvozja"><p>Čiščenje podvozja</p></a>
<a class="service-item" href="projekti.html"><img src="storitev3.jpg" alt="Večji projekti"><p>Večji projekti</p></a>
</div>
</section>

<section class="reviews" id="reviews">
<h2>Google mnenja</h2>
<div class="review-slider" id="review-slider">
<div id="review-list">Nalaganje mnenj...</div>
</div>
<div class="slider-buttons">
<button class="prev">❮</button>
<button class="next">❯</button>
</div>
</section>

<section class="contact" id="kontakt">
<video autoplay loop muted playsinline class="contact-video"><source src="contact.mp4" type="video/mp4"></video>
<div class="contact-container">
<div class="contact-content">
<h2>KONTAKT</h2>
<p>Frankovo naselje 43<br>4220 Škofja Loka</p>
<a href="mailto:zarexlaser@gmail.com">✉ zarexlaser@gmail.com</a>
<a href="tel:+38670808884">☎ +386 70 808 884</a>
<div class="social-icons">
<a href="https://www.facebook.com/profile.php?id=61576688676907" target="_blank"><i class="fab fa-facebook"></i></a>
<a href="https://www.tiktok.com/@zarexlaser" target="_blank"><i class="fab fa-tiktok"></i></a>
<a href="https://wa.me/38670808884" target="_blank"><i class="fab fa-whatsapp"></i></a>
<a href="https://www.instagram.com/vukoticzarko/" target="_blank"><i class="fab fa-instagram"></i></a>
</div>
</div>
<div class="company-info">
<h2>O PODJETJU</h2>
<p>ŽAREX, Žarko Vukotić s.p.<br>Kotnikova ulica 5, Ljubljana<br>Matična številka: 7333269000<br>Davčna številka: 23306068</p>
</div>
</div>

<!-- Mapa znotraj kontakt sekcije -->
<div class="coverage" id="coverage">
<div class="coverage-inner">
<img src="slovenia-map.png" alt="Zemljevid Slovenije">
<div class="coverage-text">
<h3>Delujemo po celi Sloveniji</h3>
<p>Kjerkoli nas potrebujete — iz Škofje Loke do največjih mest in industrijskih centrov. Hitro in zanesljivo pridemo na lokacijo ter izvedemo delo strokovno in varno.</p>
</div>
</div>
</div>
</section>

<footer><p>© 2025 ŽareX - Vse pravice pridržane</p></footer>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC0BtKOrB-zqYAumWwcsEoa2LdhOku5TlE&libraries=places&v=weekly"></script>
<script>
// === HAMBURGER MENI ===
const menuBtn = document.getElementById("menu-btn");
const sidebar = document.getElementById("sidebar");
menuBtn.addEventListener("click", () => {
  menuBtn.classList.toggle("active");
  sidebar.classList.toggle("active");
});

// === GOOGLE RECENZIJE (ORIGINALNI JEZIK) ===
function escapeHtml(s) {
  return s ? s.replace(/&/g, "&amp;")
           .replace(/</g, "&lt;")
           .replace(/>/g, "&gt;")
           .replace(/"/g, "&quot;")
           .replace(/'/g, "&#039;") : "";
}

function renderReviews(reviews) {
  const container = document.getElementById("review-list");
  container.innerHTML = "";
  if (!reviews || reviews.length === 0) {
    container.innerHTML = "<p>Ni javno dostopnih mnenj.</p>";
    return;
  }

  reviews.slice(0, 5).forEach((r, i) => {
    const card = document.createElement("div");
    card.className = "review-card" + (i === 0 ? " active" : "");
    card.innerHTML = `
      <strong>${escapeHtml(r.author_name || "Anonimno")}</strong>
      <span class="rating">★ ${r.rating || ""}</span>
      <p>${escapeHtml(r.text || "")}</p>
      <small>${new Date(r.time * 1000).toLocaleDateString()}</small>
    `;
    container.appendChild(card);
  });
  initSlider();
}

function showError(msg) {
  document.getElementById("review-list").innerHTML =
    '<p style="color:red;">Napaka pri nalaganju mnenj: ' + escapeHtml(msg) + "</p>";
}

window.initReviews = function() {
  try {
    const placeId = "ChIJzQxqen3JekcR2FiFb6QlxQg";
    const service = new google.maps.places.PlacesService(document.createElement("div"));
    service.getDetails({
      placeId: placeId,
      fields: ["name", "rating", "reviews", "user_ratings_total"]
    }, (place, status) => {
      if (status !== google.maps.places.PlacesServiceStatus.OK) {
        showError(status);
        return;
      }

      // ✅ sigurno uzimamo originalni tekst ako postoji
      const reviews = (place.reviews || []).map(r => {
        let text = "";
        try {
          if (r.original_text && r.original_text.text) {
            text = r.original_text.text; // originalni jezik
          } else {
            text = r.text || ""; // fallback
          }
        } catch (e) {
          text = r.text || "";
        }

        return {
          author_name: r.author_name,
          rating: r.rating,
          text: text,
          time: r.time
        };
      });

      renderReviews(reviews);
    });
  } catch (err) {
    showError(err.message || "Napaka");
  }
};

function waitForGoogle() {
  if (window.google && google.maps && google.maps.places) {
    window.initReviews();
  } else {
    setTimeout(waitForGoogle, 300);
  }
}
waitForGoogle();

// === SLIDER FUNKCIJA ===
function initSlider() {
  const reviews = document.querySelectorAll(".review-card");
  const nextBtn = document.querySelector(".next");
  const prevBtn = document.querySelector(".prev");
  if (!reviews.length || !nextBtn || !prevBtn) return;

  let current = 0;
  let interval;

  function showReview(index) {
    reviews.forEach((r, i) => r.classList.toggle("active", i === index));
  }

  function next() {
    current = (current + 1) % reviews.length;
    showReview(current);
  }

  function prev() {
    current = (current - 1 + reviews.length) % reviews.length;
    showReview(current);
  }

  function startAuto() { interval = setInterval(next, 4000); }
  function stopAuto() { clearInterval(interval); }

  nextBtn.addEventListener("click", () => { stopAuto(); next(); startAuto(); });
  prevBtn.addEventListener("click", () => { stopAuto(); prev(); startAuto(); });

  startAuto();
}

// === FADE-IN MAPA ===
window.addEventListener("scroll", () => {
  const coverage = document.getElementById("coverage");
  if (!coverage) return;
  const rect = coverage.getBoundingClientRect();
  if (rect.top < window.innerHeight - 100) {
    coverage.classList.add("visible");
  }
});
</script>

</body>
</html>
